{"id":"88c601f9-fac2-4348-b2b8-bf5878fa766b","revision":0,"last_node_id":124,"last_link_id":124,"nodes":[{"id":91,"type":"LayerMask: PersonMaskUltra V2","pos":[3121.433837890625,2177.705810546875],"size":[304.5269470214844,414],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":50},{"localized_name":"face","name":"face","type":"BOOLEAN","widget":{"name":"face"},"link":null},{"localized_name":"hair","name":"hair","type":"BOOLEAN","widget":{"name":"hair"},"link":null},{"localized_name":"body","name":"body","type":"BOOLEAN","widget":{"name":"body"},"link":null},{"localized_name":"clothes","name":"clothes","type":"BOOLEAN","widget":{"name":"clothes"},"link":null},{"localized_name":"accessories","name":"accessories","type":"BOOLEAN","widget":{"name":"accessories"},"link":null},{"localized_name":"background","name":"background","type":"BOOLEAN","widget":{"name":"background"},"link":null},{"localized_name":"confidence","name":"confidence","type":"FLOAT","widget":{"name":"confidence"},"link":null},{"localized_name":"detail_method","name":"detail_method","type":"COMBO","widget":{"name":"detail_method"},"link":null},{"localized_name":"detail_erode","name":"detail_erode","type":"INT","widget":{"name":"detail_erode"},"link":null},{"localized_name":"detail_dilate","name":"detail_dilate","type":"INT","widget":{"name":"detail_dilate"},"link":null},{"localized_name":"black_point","name":"black_point","type":"FLOAT","widget":{"name":"black_point"},"link":null},{"localized_name":"white_point","name":"white_point","type":"FLOAT","widget":{"name":"white_point"},"link":null},{"localized_name":"process_detail","name":"process_detail","type":"BOOLEAN","widget":{"name":"process_detail"},"link":null},{"localized_name":"device","name":"device","type":"COMBO","widget":{"name":"device"},"link":null},{"localized_name":"max_megapixels","name":"max_megapixels","type":"FLOAT","widget":{"name":"max_megapixels"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[51]},{"localized_name":"mask","name":"mask","type":"MASK","links":null}],"properties":{"cnr_id":"comfyui_layerstyle","ver":"1.0.90","Node name for S&R":"LayerMask: PersonMaskUltra V2"},"widgets_values":[true,false,false,false,false,false,0.4,"VITMatte",6,6,0.01,0.99,true,"cuda",2]},{"id":58,"type":"LoadInsightface","pos":[3284.94482421875,2094.18408203125],"size":[141.86483764648438,26],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[{"localized_name":"insightface","name":"insightface","type":"INSIGHTFACE_APP","links":[27]}],"properties":{"cnr_id":"comfyui-instantid-faceswap","ver":"0.1.1","Node name for S&R":"LoadInsightface"},"widgets_values":[]},{"id":57,"type":"FaceEmbed","pos":[3447.2841796875,2167.2392578125],"size":[327.94775390625,66],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"insightface","name":"insightface","type":"INSIGHTFACE_APP","link":27},{"localized_name":"face_image","name":"face_image","type":"IMAGE","link":51},{"localized_name":"face_embeds","name":"face_embeds","shape":7,"type":"FACE_EMBED","link":null}],"outputs":[{"localized_name":"face embeds","name":"face embeds","type":"FACE_EMBED","links":[39]}],"properties":{"cnr_id":"comfyui-instantid-faceswap","ver":"0.1.1","Node name for S&R":"FaceEmbed"},"widgets_values":[]},{"id":82,"type":"Tensor512ToFloatList","pos":[3806.0283203125,2166.644287109375],"size":[183.84432983398438,46],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"tensor","name":"tensor","type":"*","link":39}],"outputs":[{"localized_name":"float_list","name":"float_list","type":"*","links":[43]},{"localized_name":"json","name":"json","type":"STRING","links":null}],"properties":{"Node name for S&R":"Tensor512ToFloatList"},"widgets_values":[]},{"id":37,"type":"Text Concatenate","pos":[2474.268798828125,2176.102294921875],"size":[270,142],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"text_a","name":"text_a","shape":7,"type":"STRING","link":97},{"localized_name":"text_b","name":"text_b","shape":7,"type":"STRING","link":99},{"localized_name":"text_c","name":"text_c","shape":7,"type":"STRING","link":102},{"localized_name":"text_d","name":"text_d","shape":7,"type":"STRING","link":103},{"localized_name":"delimiter","name":"delimiter","type":"STRING","widget":{"name":"delimiter"},"link":null},{"localized_name":"clean_whitespace","name":"clean_whitespace","type":"COMBO","widget":{"name":"clean_whitespace"},"link":null}],"outputs":[{"localized_name":"字符串","name":"STRING","type":"STRING","links":[20]}],"properties":{"cnr_id":"was-ns","ver":"3.0.0","Node name for S&R":"Text Concatenate"},"widgets_values":["","false"]},{"id":87,"type":"QdrantUpsertOne","pos":[4013.599853515625,2171.266845703125],"size":[400,310],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"db_path","name":"db_path","type":"STRING","widget":{"name":"db_path"},"link":null},{"localized_name":"collection_name","name":"collection_name","type":"STRING","widget":{"name":"collection_name"},"link":108},{"localized_name":"point_id","name":"point_id","type":"STRING","widget":{"name":"point_id"},"link":122},{"localized_name":"vector","name":"vector","type":"STRING","widget":{"name":"vector"},"link":43},{"localized_name":"expected_dim","name":"expected_dim","shape":7,"type":"INT","widget":{"name":"expected_dim"},"link":110},{"localized_name":"payload_json","name":"payload_json","shape":7,"type":"STRING","widget":{"name":"payload_json"},"link":null},{"localized_name":"file_name","name":"file_name","shape":7,"type":"STRING","widget":{"name":"file_name"},"link":45},{"localized_name":"parent_dir","name":"parent_dir","shape":7,"type":"STRING","widget":{"name":"parent_dir"},"link":100},{"localized_name":"full_path","name":"full_path","shape":7,"type":"STRING","widget":{"name":"full_path"},"link":121}],"outputs":[{"localized_name":"result_json","name":"result_json","type":"STRING","links":[104]}],"properties":{"Node name for S&R":"QdrantUpsertOne"},"widgets_values":["./qdrant_data","test_girl","item_0001","[0.0, 0.1, 0.2]",512,"","","",""]},{"id":83,"type":"QdrantEnsureCollection","pos":[4042.435791015625,2531.704833984375],"size":[367.5816345214844,226],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"db_path","name":"db_path","type":"STRING","widget":{"name":"db_path"},"link":null},{"localized_name":"collection_name","name":"collection_name","type":"STRING","widget":{"name":"collection_name"},"link":109},{"localized_name":"vector_dim","name":"vector_dim","type":"INT","widget":{"name":"vector_dim"},"link":111},{"localized_name":"distance","name":"distance","type":"COMBO","widget":{"name":"distance"},"link":null},{"localized_name":"recreate","name":"recreate","type":"BOOLEAN","widget":{"name":"recreate"},"link":null},{"localized_name":"hnsw_m","name":"hnsw_m","shape":7,"type":"INT","widget":{"name":"hnsw_m"},"link":null},{"localized_name":"hnsw_ef_construct","name":"hnsw_ef_construct","shape":7,"type":"INT","widget":{"name":"hnsw_ef_construct"},"link":null},{"localized_name":"full_scan_threshold","name":"full_scan_threshold","shape":7,"type":"INT","widget":{"name":"full_scan_threshold"},"link":null}],"outputs":[{"localized_name":"result_json","name":"result_json","type":"STRING","links":[105]}],"properties":{"Node name for S&R":"QdrantEnsureCollection"},"widgets_values":["./qdrant_data","test_girl",512,"COSINE",false,32,128,10000]},{"id":122,"type":"PrimitiveString","pos":[2102.858642578125,2443.128173828125],"size":[270,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"值","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"字符串","name":"STRING","type":"STRING","links":[114]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.57","Node name for S&R":"PrimitiveString"},"widgets_values":[" Face_Changing"]},{"id":121,"type":"PrimitiveNode","pos":[2107.392822265625,2545.528564453125],"size":[210,82],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","widget":{"name":"expected_dim"},"links":[110,111]}],"properties":{"Run widget replace on values":false},"widgets_values":[512,"fixed"]},{"id":118,"type":"Text Concatenate","pos":[3519.05029296875,2829.173095703125],"size":[270,142],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"text_a","name":"text_a","shape":7,"type":"STRING","link":114},{"localized_name":"text_b","name":"text_b","shape":7,"type":"STRING","link":112},{"localized_name":"text_c","name":"text_c","shape":7,"type":"STRING","link":113},{"localized_name":"text_d","name":"text_d","shape":7,"type":"STRING","link":null},{"localized_name":"delimiter","name":"delimiter","type":"STRING","widget":{"name":"delimiter"},"link":null},{"localized_name":"clean_whitespace","name":"clean_whitespace","type":"COMBO","widget":{"name":"clean_whitespace"},"link":null}],"outputs":[{"localized_name":"字符串","name":"STRING","type":"STRING","links":[108,109]}],"properties":{"cnr_id":"was-ns","ver":"3.0.0","Node name for S&R":"Text Concatenate"},"widgets_values":["","true"]},{"id":29,"type":"Load Image Batch","pos":[2770.759521484375,2178.98486328125],"size":[293.416015625,270],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"index","name":"index","type":"INT","widget":{"name":"index"},"link":null},{"localized_name":"label","name":"label","type":"STRING","widget":{"name":"label"},"link":null},{"localized_name":"path","name":"path","type":"STRING","widget":{"name":"path"},"link":20},{"localized_name":"pattern","name":"pattern","type":"STRING","widget":{"name":"pattern"},"link":null},{"localized_name":"allow_RGBA_output","name":"allow_RGBA_output","type":"COMBO","widget":{"name":"allow_RGBA_output"},"link":null},{"localized_name":"filename_text_extension","name":"filename_text_extension","shape":7,"type":"COMBO","widget":{"name":"filename_text_extension"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[50]},{"localized_name":"filename_text","name":"filename_text","type":"STRING","links":[45,124]}],"properties":{"cnr_id":"was-ns","ver":"3.0.0","Node name for S&R":"Load Image Batch"},"widgets_values":["incremental_image",667915087082931,"fixed",0,"Batch 001","C:\\Users\\user-66698\\Pictures\\集中_20250905換臉_小熊學姊","*","false","true"]},{"id":119,"type":"ShowText|pysssss","pos":[4434.69091796875,2159.554931640625],"size":[737.0879516601562,88],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"text","name":"text","type":"STRING","link":104}],"outputs":[{"localized_name":"字符串","name":"STRING","shape":6,"type":"STRING","links":null}],"properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","Node name for S&R":"ShowText|pysssss"},"widgets_values":["{\"ok\": true, \"upserted\": 1, \"status\": \"completed\", \"id\": \"c8a88e54-76fb-5b01-8ad0-b5af0bccb92a\", \"file_name\": \"ComfyUI_00010_fvokf_1757067663.jpg\", \"parent_dir\": \"01\", \"full_path\": \"C:\\\\Users\\\\user-66698\\\\Documents\\\\模擬用途(用於測試工作流)\\\\01\\\\Target\\\\ComfyUI_00010_fvokf_1757067663.jpg\"}"]},{"id":110,"type":"Text Concatenate","pos":[2897.80859375,2894.554931640625],"size":[270,142],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"text_a","name":"text_a","shape":7,"type":"STRING","link":98},{"localized_name":"text_b","name":"text_b","shape":7,"type":"STRING","link":101},{"localized_name":"text_c","name":"text_c","shape":7,"type":"STRING","link":116},{"localized_name":"text_d","name":"text_d","shape":7,"type":"STRING","link":117},{"localized_name":"delimiter","name":"delimiter","type":"STRING","widget":{"name":"delimiter"},"link":null},{"localized_name":"clean_whitespace","name":"clean_whitespace","type":"COMBO","widget":{"name":"clean_whitespace"},"link":null}],"outputs":[{"localized_name":"字符串","name":"STRING","type":"STRING","links":[118]}],"properties":{"cnr_id":"was-ns","ver":"3.0.0","Node name for S&R":"Text Concatenate"},"widgets_values":["","true"]},{"id":117,"type":"workflow>控制輸入位置(用於影像嵌入向量生成)","pos":[2378.311279296875,2694.037841796875],"size":[333.2242126464844,190],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null},{"localized_name":"PrimitiveString value","name":"PrimitiveString value","type":"STRING","widget":{"name":"PrimitiveString value"},"link":null},{"localized_name":"PrimitiveString 2 value","name":"PrimitiveString 2 value","type":"STRING","widget":{"name":"PrimitiveString 2 value"},"link":null},{"localized_name":"PrimitiveString 3 value","name":"PrimitiveString 3 value","type":"STRING","widget":{"name":"PrimitiveString 3 value"},"link":null}],"outputs":[{"localized_name":"字符串","name":"STRING","type":"STRING","links":[97,98]},{"localized_name":"PrimitiveString STRING","name":"PrimitiveString STRING","type":"STRING","links":[99,100,101,112]},{"localized_name":"PrimitiveString 2 STRING","name":"PrimitiveString 2 STRING","type":"STRING","links":[102,116,119]},{"localized_name":"PrimitiveString 3 STRING","name":"PrimitiveString 3 STRING","type":"STRING","links":[103,113,117]}],"properties":{"Node name for S&R":"workflow>控制輸入位置(用於影像嵌入向量生成)"},"widgets_values":["C:\\Users\\user-66698\\Documents\\模擬用途(用於測試工作流)\\","01","\\","Target"]},{"id":124,"type":"Text Concatenate","pos":[3511.101318359375,2632.29150390625],"size":[270,142],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"text_a","name":"text_a","shape":7,"type":"STRING","link":118},{"localized_name":"text_b","name":"text_b","shape":7,"type":"STRING","link":119},{"localized_name":"text_c","name":"text_c","shape":7,"type":"STRING","link":124},{"localized_name":"text_d","name":"text_d","shape":7,"type":"STRING","link":null},{"localized_name":"delimiter","name":"delimiter","type":"STRING","widget":{"name":"delimiter"},"link":null},{"localized_name":"clean_whitespace","name":"clean_whitespace","type":"COMBO","widget":{"name":"clean_whitespace"},"link":null}],"outputs":[{"localized_name":"字符串","name":"STRING","type":"STRING","links":[121,122]}],"properties":{"cnr_id":"was-ns","ver":"3.0.0","Node name for S&R":"Text Concatenate"},"widgets_values":["","true"]},{"id":120,"type":"ShowText|pysssss","pos":[4440.962890625,2508.260986328125],"size":[543.2697143554688,101.91707611083984],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"text","name":"text","type":"STRING","link":105}],"outputs":[{"localized_name":"字符串","name":"STRING","shape":6,"type":"STRING","links":null}],"properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","Node name for S&R":"ShowText|pysssss"},"widgets_values":["{\"ok\": true, \"action\": \"exists\", \"collection\": \"Face_Changing01Target\"}"]}],"links":[[20,37,0,29,4,"STRING"],[27,58,0,57,0,"INSIGHTFACE_APP"],[39,57,0,82,0,"*"],[43,82,0,87,3,"STRING"],[45,29,1,87,6,"STRING"],[50,29,0,91,0,"IMAGE"],[51,91,0,57,1,"IMAGE"],[97,117,0,37,0,"STRING"],[98,117,0,110,0,"STRING"],[99,117,1,37,1,"STRING"],[100,117,1,87,7,"STRING"],[101,117,1,110,1,"STRING"],[102,117,2,37,2,"STRING"],[103,117,3,37,3,"STRING"],[104,87,0,119,0,"STRING"],[105,83,0,120,0,"STRING"],[108,118,0,87,1,"STRING"],[109,118,0,83,1,"STRING"],[110,121,0,87,4,"INT"],[111,121,0,83,2,"INT"],[112,117,1,118,1,"STRING"],[113,117,3,118,2,"STRING"],[114,122,0,118,0,"STRING"],[116,117,2,110,2,"STRING"],[117,117,3,110,3,"STRING"],[118,110,0,124,0,"STRING"],[119,117,2,124,1,"STRING"],[121,124,0,87,8,"STRING"],[122,124,0,87,2,"STRING"],[124,29,1,124,2,"STRING"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.5989500000000113,"offset":[-1026.988909367774,-1889.4125145981925]},"groupNodes":{"控制輸入位置(用於影像嵌入向量生成)":{"nodes":[{"id":-1,"type":"PrimitiveString","pos":[2124.1259765625,2166.6162109375],"size":[270,58],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"值","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"字符串","name":"STRING","type":"STRING","links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.57","Node name for S&R":"PrimitiveString"},"widgets_values":["C:\\Users\\user-66698\\Pictures\\"],"index":0},{"id":-1,"type":"PrimitiveString","pos":[2129.575927734375,2280.064453125],"size":[270,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"值","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"字符串","name":"STRING","type":"STRING","links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.57","Node name for S&R":"PrimitiveString"},"widgets_values":["集中_20250905換臉_小熊學姊"],"index":1},{"id":-1,"type":"PrimitiveString","pos":[2124.743896484375,2383.570068359375],"size":[270,58],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"值","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"字符串","name":"STRING","type":"STRING","links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.57","Node name for S&R":"PrimitiveString"},"widgets_values":["\\"],"index":2},{"id":-1,"type":"PrimitiveString","pos":[2125.885009765625,2489.623046875],"size":[270,58],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"值","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"字符串","name":"STRING","type":"STRING","links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.57","Node name for S&R":"PrimitiveString"},"widgets_values":["face"],"index":3}],"links":[],"external":[[0,0,"STRING"],[1,0,"STRING"],[2,0,"STRING"],[3,0,"STRING"]]}}},"version":0.4}